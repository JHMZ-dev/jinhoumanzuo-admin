{include file="common/all" /}
<style>
    /*分页*/
    .pagination {margin-left: 8.5rem;}
    .pagination li {display: inline-block;margin-right: -1px;padding: 13px;border: 1px solid #e2e2e2;min-width: 20px;text-align: center;width: 100px;height: 50px;}
    .pagination li.active {background: #009688;color: #fff;border: 1px solid #009688;}
    .pagination li a {display: block;text-align: center;}
</style>
<div class="main-panel">
    <!-- BEGIN : Main Content-->
    <div class="main-content">
        <div class="content-wrapper"><!--Extended Table starts-->
            <section id="extended">
                <div class="row">
                    <div class="col-sm-12">
                        {if $roleid == 1}
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="daoru()">导入注册</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="chadaquweima()">查询大区尾码</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_add('1')">增加任务包</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_del('1')">减少任务包</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_add('2')">增加影票</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_del('2')">减少影票</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_add('3')">增加通证</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_del('3')">减少通证</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_add('4')">增加扑满</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="all_del('4')">减少扑满</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="chazhitui()">查倒序直推</button>
                        <button type="button" style="margin-top: 20px;margin-left: 20px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="cha_login_ip()">查倒序登录IP</button>
                        {/if}
                        <div class="card">
                            <div class="card-header">
                                <form action="/sun_admin/user" role="search" class="navbar-form navbar mt-1" style="float: left !important;margin-left: 100px;" name="form1" id="form1">
                                    <div class="position-relative has-icon-right" style="margin-left: 20px;">
                                        <select class="form-control" name="status">
                                            <option value="0">请选择搜索内容</option>
                                            <option value="1">ID</option>
                                            <option value="2">昵称</option>
                                            <option value="3">手机号</option>
                                            <option value="4">身份证</option>
                                            <option value="5">直推码</option>
                                            <option value="6">排线码</option>
                                            <option value="7">IP</option>
                                        </select>
                                    </div>
                                    <div class="position-relative has-icon-right" style="margin-left: 20px;">
                                        <input type="text" placeholder="Search" class="form-control" name="cont"/>
                                    </div>
                                    <div class="position-relative has-icon-right" style="margin-left: 20px;">
                                        <select class="form-control" name="paixu">
                                            <option value="">请选择排序</option>
                                            {volist name="paixu2" id="paixus"}
                                            <option value="{$i}">{$paixus}</option>
                                            {/volist}
                                        </select>
                                    </div>
                                    <div class="position-relative has-icon-right" style="margin-left: 20px;">
                                        <select class="form-control" name="xingji">
                                            <option value="">请选择星级</option>
                                            {volist name="xingji2" id="xingji2s"}
                                            <option value="{$i}">{$xingji2s}</option>
                                            {/volist}
                                        </select>
                                    </div>
                                    <div class="position-relative has-icon-right" style="margin-left: 20px;">
                                        <button type="button" style="margin-top: 4px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="document.getElementById('form1').submit();">模糊查找</button>
                                    </div>
                                </form>
                            </div>
                            <div class="card-content">
                                <div class="card-body table-responsive">
                                    <table class="table text-center">
                                        <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>用户ID</th>
                                            <th>查无线上级</th>
                                            <th>查直推</th>
                                            <th>昵称</th>
                                            <th>备注</th>
                                            <th>手机号</th>
                                            <th>会员状态</th>
                                            <th>实名状态</th>
                                            <th>用户星级</th>
                                            <th>星级降级</th>
                                            <th>查看包</th>
                                            <th>团队总人数</th>
                                            <th>直推人数</th>
                                            <th>间推人数</th>
                                            <th>团队总实名人数</th>
                                            <th>直推实名人数</th>
                                            <th>间推实名人数</th>
                                            <th>个人贡献值</th>
                                            <th>团队总贡献值</th>
                                            <th>大区贡献值</th>
                                            <th>小区贡献值</th>
                                            <th>影票</th>
                                            <th>通证</th>
                                            <th>扑满</th>
                                            <th>直推码</th>
                                            <th>排线码</th>
                                            <th>帐号状态</th>
                                            <th>团队账号状态</th>
                                            <th>操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {volist name="user" id="users"}
                                        <tr>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 {if condition="$users['login_status'] == '1'" /} redbj {/if}" onclick="userinfo('{$users.user_id}')"><i class="fa fa-user-o"></i> {$users.user_id}</button></td>
                                            <td>{$users.user_id}</td>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="chapid('{$users.user_id}')"> 点击查询</button></td>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="chazhi('{$users.user_id}')"> 查直推</button></td>
                                            <td>{$users.nickname}</td>
                                            <td>{$users.cont}</td>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="gaihaoma('{$users.mobile}')">{$users.mobile} </button></td>
                                            <td>
                                                {if condition="$users['role_id'] == 1"}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 success" onclick="open_vip('{$users.user_id}',2)">是会员</button>
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="open_vip('{$users.user_id}',1)">不是会员</button>
                                                {/if}
                                            </td>
                                            <td>
                                                {if condition="$users['auth'] == 1"}
                                                    <span class="success">已实名</span>
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="auth_edit('{$users.user_id}')">未实名</button>
                                                {/if}
                                            </td>
                                            <td>
                                                {if condition="$users['group'] >= 5"}
                                                <span class="">{$users.group_name}</span>
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="daren('{$users.user_id}')">{$users.group_name}</button>
                                                {/if}
                                            </td>
                                            <td>
                                                {if condition="$users['group'] <= 0"}
                                                {$users.group_name}
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="daren_di('{$users.user_id}')">{$users.group_name}</button>
                                                {/if}
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="get_bao('{$users.user_id}')">查看</button>
                                            </td>
                                            <td>{$users.team}</td>
                                            <td>{$users._zhi_user}</td>
                                            <td>{$users._jian_user}</td>
                                            <td>{$users._team_user_real}</td>
                                            <td>{$users._zhi_user_real}</td>
                                            <td>{$users._jian_user_real}</td>
                                            <td>{$users.geren_huoyue}</td>
                                            <td>{$users.team_huoyue}</td>
                                            <td>{$users.daqu_huoyue}</td>
                                            <td>{$users.xiaoqu_huoyue}</td>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="all_logs('{$users.user_id}',2)">{$users.yingpiao} </button></td>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="all_logs('{$users.user_id}',3)">{$users.tongzheng} </button></td>
                                            <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="all_logs('{$users.user_id}',4)">{$users.puman} </button></td>
                                            <td>{$users.ma_zhitui}</td>
                                            <td>{$users.ma_paixian}</td>
                                            <td>
                                                {if condition="$users['login_status'] == '0'"}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greenbj" onclick="login22('{$users.user_id}',1)">{$users.login_status2}</button>
                                                {else if condition="$users['login_status'] == '1'" /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 redbj" onclick="login22('{$users.user_id}',0)">{$users.login_status2}</button>
                                                {/if}
                                            </td>
                                            <td>
                                                {if condition="$users['team_login_status'] == '0'"}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greentext" onclick="login33('{$users.user_id}',1)">禁团队登</button>
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login33('{$users.user_id}',0)">开团队登</button>
                                                {/if}
                                                {if condition="$users['zhi_login_status'] == '0'"}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greentext" onclick="login44('{$users.user_id}',1)">禁直推登</button>
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login44('{$users.user_id}',0)">开直推登</button>
                                                {/if}
                                                {if condition="$users['jian_login_status'] == '0'"}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greentext" onclick="login55('{$users.user_id}',1)">禁间推登</button>
                                                {else /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login55('{$users.user_id}',0)">开间推登</button>
                                                {/if}
                                            </td>
                                            <td>
                                                {if condition="$users['login_status'] == '0'"}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="login22('{$users.user_id}',2)">{$users.login_status2}</button>
                                                {else if condition="$users['login_status'] == '2'" /}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="login22('{$users.user_id}',0)">{$users.login_status2}</button>
                                                {/if}
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="auth_shibai_do('{$users.user_id}')">清理认证次数</button>
                                                <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="del_hunaxin_token('{$users.user_id}')">清理令牌</button>
                                                <button type="button" class="btn btn-raised btn-icon btn-success mr-1" onclick="user_beizhu('{$users.user_id}','{$users.cont}')">
                                                    备注
                                                </button>
                                            </td>
                                        </tr>
                                        {/volist}
                                        </tbody>
                                    </table>
                                    {$show}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--Extended Table Ends-->
        </div>
    </div>
    <!-- END : End Main Content-->
</div>
</div>

{include file="common/right" /}


<!-- BEGIN VENDOR JS-->
<script src="http://img.lll1.vip/apex-assets/vendors/js/core/jquery-3.2.1.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/core/popper.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/prism.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/jquery.matchHeight-min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/screenfull.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/pace/pace.min.js" type="text/javascript"></script>
<!-- BEGIN VENDOR JS-->
<script>
    //升级达人
    function daren(user_id)
    {
        swal({
            title: '升级达人等级',
            text: '是否确定升级达人等级?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/update_daren',
                    dataType: 'json',
                    data: {"user_id":user_id},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }


    function daren_di(user_id)
    {
        swal({
            title: '降低达人等级',
            text: '是否确定降低达人等级?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/update_daren_di',
                    dataType: 'json',
                    data: {"user_id":user_id},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //查看用户信息
    function userinfo(id)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查看用户信息',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/get_user_info?id='+id,
            });
        });
    }
    //导入注册
    function daoru()
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '导入注册',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/daoruzhuce',
            });
        });
    }

    //查看日志
    function all_logs(id,type)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查看日志',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/get_user_logs?type='+type+'&user_id='+id,
            });
        });
    }
    //云仓
    function yuncang(id,type)
    {
        if(type == 1)
        {
            var title = '设置为云仓';
            var text  = '是否确定设置为云仓?';
        }else{
            var title = '关闭云仓';
            var text  = '是否确定关闭云仓?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_yc_set',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login22(id,type)
    {
        if(type == 1)
        {
            var title = '禁止登录';
            var text  = '是否确定禁止登录?';
        }else if(type == 2)
        {
            var title = '假注销';
            var text  = '是否确定假注销?';
        } else{
            var title = '开启登录';
            var text  = '是否确定开启登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_login_status',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login33(id,type)
    {
        if(type == 1)
        {
            var title = '禁止团队登录';
            var text  = '是否确定禁止团队登录?';
        }else{
            var title = '开启团队登录';
            var text  = '是否确定开启团队登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_team_login',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login44(id,type)
    {
        if(type == 1)
        {
            var title = '禁止直推登录';
            var text  = '是否确定禁止直推登录?';
        }else{
            var title = '开启直推登录';
            var text  = '是否确定开启直推登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_zhi_login',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login55(id,type)
    {
        if(type == 1)
        {
            var title = '禁止间推登录';
            var text  = '是否确定禁止间推登录?';
        }else{
            var title = '开启间推登录';
            var text  = '是否确定开启间推登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_jian_login',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    function auth_edit(id)
    {
        var title = '实名账户';
        var text  = '是否确定实名该账户?';
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_auth',
                    dataType: 'json',
                    data: {"user_id":id},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    function open_vip(id,type)
    {
        if(type == 1)
        {
            var title = '开通会员';
            var text  = '是否确定开通会员?';
        }else{
            var title = '关闭会员';
            var text  = '是否确定关闭会员?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_vip',
                    dataType: 'json',
                    data: {"user_id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //增加所有
    function all_add(type)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '增加',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/user_all_add?type='+type,
            });
        });
    }
    function qingchu()
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '清除账号',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/user_qingchu',
            });
        });
    }

    //减少所有
    function all_del(type)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '减少',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/user_all_del?type='+type,
            });
        });
    }
    function chazhitui()
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查倒序直推',
                maxmin: true,
                area: ['90%', '90%'],
                content: '/sun_admin/chazhitui',
            });
        });
    }

    function cha_login_ip()
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查倒序IP',
                maxmin: true,
                area: ['90%', '90%'],
                content: '/sun_admin/cha_login_ip',
            });
        });
    }


    function daoxu()
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查倒叙直推实名人数',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/daoxu',
            });
        });
    }
    function chadaquweima()
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查大区尾码',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/chadaquweima',
            });
        });
    }
    //兜底
    function doudi(type)
    {
        if(type == 1)
        {
            var title = '兜底';
        }else{
            var title = '取消兜底';
        }
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: title,
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/doudi?type='+type,
            });
        });
    }
    function gaihaoma(mobile)
    {
        swal({
            title: "修改手机号",
            text: "请输入修改后的手机号：",
            input: "text",
            showCancelButton: true,
            closeOnConfirm: false,
            animation: "slide-from-top",
            inputPlaceholder: "Write something"
        }).then(function (inputValue) {
            if (inputValue === "")
            {
                swal(
                    '请输入修改后的手机号',
                    '',
                    'error'
                );
                return false
            }else{
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_gaihaoma',
                    dataType: 'json',
                    data: {"mobile":mobile,"mobile2":inputValue},
                    success: function(res)
                    {
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        });
    }
    function chapid(id)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查无线上级',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/user_cha_pid?user_id='+id,
            });
        });
    }
    function chazhi(id)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查直推',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/user_chazhi?user_id='+id,
            });
        });
    }
    function chapaixian(id)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查询排线信息',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/paixian?user_id='+id,
            });
        });
    }

    function get_bao(id)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查询',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/get_bao?user_id='+id,
            });
        });
    }

    function auth_shibai_do(id){

            var title = '清理认证次数';
            var text  = '是否确定清理认证次数?';

        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/auth_shibai_do',
                    dataType: 'json',
                    data: {"id":id},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    function del_hunaxin_token(id){

        var title = '清理';
        var text  = '是否确定清理?';

        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/del_hunaxin_token',
                    dataType: 'json',
                    data: {"id":id},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //备注
    function user_beizhu(id,type)
    {
        swal({
            title: "内容",
            text: "请输入内容：",
            input: "text",
            showCancelButton: true,
            closeOnConfirm: false,
            animation: "slide-from-top",
            inputPlaceholder: type
        }).then(function (inputValue) {
            $.ajax({
                type: 'post',
                url: '/sun_admin/user_beizhu',
                dataType: 'json',
                data: {"id":id,"cont":inputValue},
                success: function(res)
                {
                    if(res.status == '200')
                    {
                        swal(
                            res.msg,
                            '',
                            'success'
                        );
                        setTimeout(function () {
                            window.location.reload();
                        }, 1800);
                    }else{
                        swal(
                            res.msg,
                            '',
                            'error'
                        );
                    }
                },
            });
        });
    }

</script>
</body>
<!-- END : Body-->
</html>