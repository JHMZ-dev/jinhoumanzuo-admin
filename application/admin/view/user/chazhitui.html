{include file="common/head" /}
<!-- BEGIN : Body-->
<style>
    /*分页*/
    .pagination {margin-left: 8.5rem;}
    .pagination li {display: inline-block;margin-right: -1px;padding: 13px;border: 1px solid #e2e2e2;min-width: 15px;text-align: center;width: 100px;height: 50px;}
    .pagination li.active {background: #009688;color: #fff;border: 1px solid #009688;}
    .pagination li a {display: block;text-align: center;}
</style>
<body data-col="2-columns" class=" 2-columns  layout-dark">
<!-- ////////////////////////////////////////////////////////////////////////////-->
<div class="wrapper">
    <div class="row match-height">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <form action="" role="search" class="navbar-form navbar mt-1" style="float: left !important;margin-left: 100px;" name="form1" id="form1">
                        <div class="position-relative has-icon-right" style="margin-left: 20px;">
                            <div class="form-group row" style="margin-bottom:0; ">
                                <div class="col-md-9">
                                    <div class="position-relative has-icon-left">
                                        <input type="date" id="begintime" class="form-control" name="begintime" style="width: 210px;" value="{$begintime}">
                                        <div class="form-control-position">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="position-relative has-icon-right" style="margin-left: 20px;">
                            <button type="button" style="margin-top: 4px;" class="btn btn-raised btn-secondary btn-min-width mr-1 mb-1" onclick="document.getElementById('form1').submit();">Search</button>
                        </div>
                    </form>
                </div>
                <div class="card-content">
                    <div class="px-3">
                        <div class="card-content">
                            <div class="card-body table-responsive">
                                <table class="table text-center">
                                    <thead>
                                    <tr>
                                        <th>用户ID</th>
                                        <th>手机号</th>
                                        <th>今日直推人数</th>
                                        <th>今日直推人数状态</th>
                                        <th>|</th>
                                        <th>团队总人数</th>
                                        <th>直推人数</th>
                                        <th>间推人数</th>
                                        <th>团队总实名人数</th>
                                        <th>直推实名人数</th>
                                        <th>间推实名人数</th>
                                        <th>个人贡献值</th>
                                        <th>团队总贡献值</th>
                                        <th>大区贡献值</th>
                                        <th>小区贡献值</th>
                                        <th>备注</th>
                                        <th>帐号状态</th>
                                        <th>团队账号状态</th>
                                        <th>操作</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {volist name="data" id="datas"}
                                    <tr>
                                        <td>{$datas.pid}</td>
                                        <td>{$datas.mobile}</td>
                                        <td><button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="chaxun('{$datas.pid}','{$begintime}')">{$datas.count}人</button></td>
                                        <td>
                                            {if condition="$datas['jinri_login_status'] == 2"}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 redbj" onclick="login66('{$datas.pid}',0)">开启今日直推人数</button>
                                            {else /}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greenbj" onclick="login66('{$datas.pid}',2)">禁止今日直推人数</button>
                                            {/if}
                                        </td>
                                        <td>|</td>
                                        <td>{$datas.team}</td>
                                        <td>{$datas._zhi_user}</td>
                                        <td>{$datas._jian_user}</td>
                                        <td>{$datas._team_user_real}</td>
                                        <td>{$datas._zhi_user_real}</td>
                                        <td>{$datas._jian_user_real}</td>
                                        <td>{$datas.geren_huoyue}</td>
                                        <td>{$datas.team_huoyue}</td>
                                        <td>{$datas.daqu_huoyue}</td>
                                        <td>{$datas.xiaoqu_huoyue}</td>
                                        <td>{$datas.cont}</td>
                                        <td>
                                            {if condition="$datas['login_status'] == '0'"}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="login22('{$datas.pid}',1)">{$datas.login_status2}</button>
                                            {else if condition="$datas['login_status'] == '1'" /}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 redbj" onclick="login22('{$datas.pid}',0)">{$datas.login_status2}</button>
                                            {/if}
                                        </td>
                                        <td>
                                            {if condition="$datas['team_login_status'] == '0'"}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greentext" onclick="login33('{$datas.pid}',1)">禁团队登</button>
                                            {else /}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login33('{$datas.pid}',0)">开团队登</button>
                                            {/if}
                                            {if condition="$datas['zhi_login_status'] == '0'"}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greentext" onclick="login44('{$datas.pid}',1)">禁直推登</button>
                                            {else /}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login44('{$datas.pid}',0)">开直推登</button>
                                            {/if}
                                            {if condition="$datas['jian_login_status'] == '0'"}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 greentext" onclick="login55('{$datas.pid}',1)">禁间推登</button>
                                            {else /}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login55('{$datas.pid}',0)">开间推登</button>
                                            {/if}
                                        </td>
                                        <td>
                                            {if condition="$datas['login_status'] == '0'"}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 grren" onclick="login22('{$datas.pid}',2)">{$datas.login_status2}</button>
                                            {else if condition="$datas['login_status'] == '2'" /}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1 red" onclick="login22('{$datas.pid}',0)">{$datas.login_status2}</button>
                                            {/if}
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="auth_shibai_do('{$datas.pid}')">清理认证次数</button>
                                            <button type="button" class="btn btn-raised btn-icon btn-secondary mr-1" onclick="del_hunaxin_token('{$datas.pid}')">清理令牌</button>
                                            <button type="button" class="btn btn-raised btn-icon btn-success mr-1" onclick="user_beizhu('{$datas.pid}','{$datas.cont}')">
                                                备注
                                            </button>
                                        </td>
                                    </tr>
                                    {/volist}
                                    </tbody>
                                </table>
                                {$show}
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- BEGIN VENDOR JS-->
<script src="http://img.lll1.vip/apex-assets/vendors/js/core/popper.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/prism.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/jquery.matchHeight-min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/screenfull.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/pace/pace.min.js" type="text/javascript"></script>

<script src="http://img.lll1.vip/apex-assets/vendors/js/sweetalert2.min.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/vendors/js/toastr.min.js" type="text/javascript"></script>

<script src="http://img.lll1.vip/apex-assets/js/app-sidebar.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/js/notification-sidebar.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/js/customizer.js" type="text/javascript"></script>
<script src="http://img.lll1.vip/apex-assets/js/sweet-alerts.js" type="text/javascript"></script>
<script src="__PUB__/jquery-3.2.1.min.js" type="text/javascript"></script>
<script src="__PUB__/layer/layer.js" type="text/javascript"></script>

<!-- BEGIN VENDOR JS-->
<script>
    //查看用户信息
    function chaxun(id,begintime)
    {
        layer.ready(function ()
        {
            layer.open({
                type: 2,
                title: '查询今日直推人数',
                maxmin: true,
                area: ['80%', '80%'],
                content: '/sun_admin/chaxunjinrizhitui?id='+id+'&begintime='+begintime,
            });
        });
    }
    //禁止/开启登录
    function login22(id,type)
    {
        if(type == 1)
        {
            var title = '禁止登录';
            var text  = '是否确定禁止登录?';
        }else if(type == 2)
        {
            var title = '假注销';
            var text  = '是否确定假注销?';
        } else{
            var title = '开启登录';
            var text  = '是否确定开启登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_login_status',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login33(id,type)
    {
        if(type == 1)
        {
            var title = '禁止团队登录';
            var text  = '是否确定禁止团队登录?';
        }else{
            var title = '开启团队登录';
            var text  = '是否确定开启团队登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_team_login',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login44(id,type)
    {
        if(type == 1)
        {
            var title = '禁止直推登录';
            var text  = '是否确定禁止直推登录?';
        }else{
            var title = '开启直推登录';
            var text  = '是否确定开启直推登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_zhi_login',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }

    //禁止/开启登录
    function login55(id,type)
    {
        if(type == 1)
        {
            var title = '禁止间推登录';
            var text  = '是否确定禁止间推登录?';
        }else{
            var title = '开启间推登录';
            var text  = '是否确定开启间推登录?';
        }
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_jian_login',
                    dataType: 'json',
                    data: {"id":id,"type":type},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }
    //备注
    function user_beizhu(id,type)
    {
        swal({
            title: "内容",
            text: "请输入内容：",
            input: "text",
            showCancelButton: true,
            closeOnConfirm: false,
            animation: "slide-from-top",
            inputPlaceholder: type
        }).then(function (inputValue) {
            $.ajax({
                type: 'post',
                url: '/sun_admin/user_beizhu',
                dataType: 'json',
                data: {"id":id,"cont":inputValue},
                success: function(res)
                {
                    if(res.status == '200')
                    {
                        swal(
                            res.msg,
                            '',
                            'success'
                        );
                        setTimeout(function () {
                            window.location.reload();
                        }, 1800);
                    }else{
                        swal(
                            res.msg,
                            '',
                            'error'
                        );
                    }
                },
            });
        });
    }
    //禁止/开启登录
    function login66(id,type)
    {
        if(type == 2)
        {
            var title = '禁止今日直推人数登录';
            var text  = '是否确定禁止今日直推人数登录?';
        }else{
            var title = '开启今日直推人数登录';
            var text  = '是否确定开启今日直推人数登录?';
        }
        var bt = '{$begintime}';
        swal({
            title: title,
            text: text,
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#0CC27E',
            cancelButtonColor: '#FF586B',
            confirmButtonText: '是',
            cancelButtonText: "否"
        }).then(function (isConfirm) {
            // isConfirm 返回结果true和false
            if (isConfirm) {
                $.ajax({
                    type: 'post',
                    url: '/sun_admin/user_jinri_login',
                    dataType: 'json',
                    data: {"id":id,"bt":bt},
                    success: function(res){
                        if(res.status == '200')
                        {
                            swal(
                                res.msg,
                                '',
                                'success'
                            );
                            setTimeout(function () {
                                window.location.reload();
                            }, 1800);
                        }else{
                            swal(
                                res.msg,
                                '',
                                'error'
                            );
                        }
                    },
                });
            }
        }).catch(swal.noop);
    }
</script>